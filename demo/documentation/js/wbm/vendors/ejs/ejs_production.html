<!DOCTYPE html>

<html>
<head>
  <title>ejs_production.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="public/stylesheets/normalize.css" />
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div class="container">
    <div class="page">

      <div class="header">
        
          <h1>ejs_production.js</h1>
        

        
          <div class="toc">
            <h3>Table of Contents</h3>
            <ol>
              
                
                <li>
                  <a class="source" href="ejs.html">
                    ejs.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="ejs_production.html">
                    ejs_production.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="view.html">
                    view.js
                  </a>
                </li>
              
            </ol>
          </div>
        
      </div>

      
        
        
        
          <div class='highlight'><pre>(<span class="keyword">function</span>(){<span class="keyword">var</span> rsplit=<span class="keyword">function</span>(string,regex){<span class="keyword">var</span> result=regex.exec(string),retArr=<span class="keyword">new</span> Array(),first_idx,last_idx,first_bit;<span class="keyword">while</span>(result!=<span class="literal">null</span>){first_idx=result.index;last_idx=regex.lastIndex;<span class="keyword">if</span>((first_idx)!=<span class="number">0</span>){first_bit=string.substring(<span class="number">0</span>,first_idx);retArr.push(string.substring(<span class="number">0</span>,first_idx));string=string.slice(first_idx)}retArr.push(result[<span class="number">0</span>]);string=string.slice(result[<span class="number">0</span>].length);result=regex.exec(string)}<span class="keyword">if</span>(!string==<span class="string">""</span>){retArr.push(string)}<span class="keyword">return</span> retArr},chop=<span class="keyword">function</span>(string){<span class="keyword">return</span> string.substr(<span class="number">0</span>,string.length-<span class="number">1</span>)},extend=<span class="keyword">function</span>(d,s){<span class="keyword">for</span>(<span class="keyword">var</span> n <span class="keyword">in</span> s){<span class="keyword">if</span>(s.hasOwnProperty(n)){d[n]=s[n]}}};EJS=<span class="keyword">function</span>(options){options=<span class="keyword">typeof</span> options==<span class="string">"string"</span>?{view:options}:options;<span class="keyword">this</span>.set_options(options);<span class="keyword">if</span>(options.precompiled){<span class="keyword">this</span>.template={};<span class="keyword">this</span>.template.process=options.precompiled;EJS.update(<span class="keyword">this</span>.name,<span class="keyword">this</span>);<span class="keyword">return</span> }<span class="keyword">if</span>(options.element){<span class="keyword">if</span>(<span class="keyword">typeof</span> options.element==<span class="string">"string"</span>){<span class="keyword">var</span> name=options.element;options.element=document.getElementById(options.element);<span class="keyword">if</span>(options.element==<span class="literal">null</span>){<span class="keyword">throw</span> name+<span class="string">"does not exist!"</span>}}<span class="keyword">if</span>(options.element.value){<span class="keyword">this</span>.text=options.element.value}<span class="keyword">else</span>{<span class="keyword">this</span>.text=options.element.innerHTML}<span class="keyword">this</span>.name=options.element.id;<span class="keyword">this</span>.type=<span class="string">"["</span>}<span class="keyword">else</span>{<span class="keyword">if</span>(options.url){options.url=EJS.endExt(options.url,<span class="keyword">this</span>.extMatch);<span class="keyword">this</span>.name=<span class="keyword">this</span>.name?<span class="keyword">this</span>.name:options.url;<span class="keyword">var</span> url=options.url;<span class="keyword">var</span> template=EJS.get(<span class="keyword">this</span>.name,<span class="keyword">this</span>.cache);<span class="keyword">if</span>(template){<span class="keyword">return</span> template}<span class="keyword">if</span>(template==EJS.INVALID_PATH){<span class="keyword">return</span> <span class="literal">null</span>}<span class="keyword">try</span>{<span class="keyword">this</span>.text=EJS.request(url+(<span class="keyword">this</span>.cache?<span class="string">""</span>:<span class="string">"?"</span>+Math.random()))}<span class="keyword">catch</span>(e){}<span class="keyword">if</span>(<span class="keyword">this</span>.text==<span class="literal">null</span>){<span class="keyword">throw</span> ({type:<span class="string">"EJS"</span>,message:<span class="string">"There is no template at "</span>+url})}}}<span class="keyword">var</span> template=<span class="keyword">new</span> EJS.Compiler(<span class="keyword">this</span>.text,<span class="keyword">this</span>.type);template.compile(options,<span class="keyword">this</span>.name);EJS.update(<span class="keyword">this</span>.name,<span class="keyword">this</span>);<span class="keyword">this</span>.template=template};EJS.prototype={render:<span class="keyword">function</span>(object,extra_helpers){object=object||{};<span class="keyword">this</span>._extra_helpers=extra_helpers;<span class="keyword">var</span> v=<span class="keyword">new</span> EJS.Helpers(object,extra_helpers||{});<span class="keyword">return</span> <span class="keyword">this</span>.template.process.call(object,object,v)},update:<span class="keyword">function</span>(element,options){<span class="keyword">if</span>(<span class="keyword">typeof</span> element==<span class="string">"string"</span>){element=document.getElementById(element)}<span class="keyword">if</span>(options==<span class="literal">null</span>){_template=<span class="keyword">this</span>;<span class="keyword">return</span> <span class="keyword">function</span>(object){EJS.prototype.update.call(_template,element,object)}}<span class="keyword">if</span>(<span class="keyword">typeof</span> options==<span class="string">"string"</span>){params={};params.url=options;_template=<span class="keyword">this</span>;params.onComplete=<span class="keyword">function</span>(request){<span class="keyword">var</span> object=eval(request.responseText);EJS.prototype.update.call(_template,element,object)};EJS.ajax_request(params)}<span class="keyword">else</span>{element.innerHTML=<span class="keyword">this</span>.render(options)}},out:<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.template.out},set_options:<span class="keyword">function</span>(options){<span class="keyword">this</span>.type=options.type||EJS.type;<span class="keyword">this</span>.cache=options.cache!=<span class="literal">null</span>?options.cache:EJS.cache;<span class="keyword">this</span>.text=options.text||<span class="literal">null</span>;<span class="keyword">this</span>.name=options.name||<span class="literal">null</span>;<span class="keyword">this</span>.ext=options.ext||EJS.ext;<span class="keyword">this</span>.extMatch=<span class="keyword">new</span> RegExp(<span class="keyword">this</span>.ext.replace(<span class="regexp">/\./</span>,<span class="string">"."</span>))}};EJS.endExt=<span class="keyword">function</span>(path,match){<span class="keyword">if</span>(!path){<span class="keyword">return</span> <span class="literal">null</span>}match.lastIndex=<span class="number">0</span>;<span class="keyword">return</span> path+(match.test(path)?<span class="string">""</span>:<span class="keyword">this</span>.ext)};EJS.Scanner=<span class="keyword">function</span>(source,left,right){extend(<span class="keyword">this</span>,{left_delimiter:left+<span class="string">"%"</span>,right_delimiter:<span class="string">"%"</span>+right,double_left:left+<span class="string">"%%"</span>,double_right:<span class="string">"%%"</span>+right,left_equal:left+<span class="string">"%="</span>,left_comment:left+<span class="string">"%#"</span>});<span class="keyword">this</span>.SplitRegexp=left==<span class="string">"["</span>?<span class="regexp">/(\[%%)|(%%\])|(\[%=)|(\[%#)|(\[%)|(%\]\n)|(%\])|(\n)/</span>:<span class="keyword">new</span> RegExp(<span class="string">"("</span>+<span class="keyword">this</span>.double_left+<span class="string">")|(%%"</span>+<span class="keyword">this</span>.double_right+<span class="string">")|("</span>+<span class="keyword">this</span>.left_equal+<span class="string">")|("</span>+<span class="keyword">this</span>.left_comment+<span class="string">")|("</span>+<span class="keyword">this</span>.left_delimiter+<span class="string">")|("</span>+<span class="keyword">this</span>.right_delimiter+<span class="string">"\n)|("</span>+<span class="keyword">this</span>.right_delimiter+<span class="string">")|(\n)"</span>);<span class="keyword">this</span>.source=source;<span class="keyword">this</span>.stag=<span class="literal">null</span>;<span class="keyword">this</span>.lines=<span class="number">0</span>};EJS.Scanner.to_text=<span class="keyword">function</span>(input){<span class="keyword">if</span>(input==<span class="literal">null</span>||input===<span class="literal">undefined</span>){<span class="keyword">return</span><span class="string">""</span>}<span class="keyword">if</span>(input <span class="keyword">instanceof</span> Date){<span class="keyword">return</span> input.toDateString()}<span class="keyword">if</span>(input.toString){<span class="keyword">return</span> input.toString()}<span class="keyword">return</span><span class="string">""</span>};EJS.Scanner.prototype={scan:<span class="keyword">function</span>(block){scanline=<span class="keyword">this</span>.scanline;regex=<span class="keyword">this</span>.SplitRegexp;<span class="keyword">if</span>(!<span class="keyword">this</span>.source==<span class="string">""</span>){<span class="keyword">var</span> source_split=rsplit(<span class="keyword">this</span>.source,<span class="regexp">/\n/</span>);<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;source_split.length;i++){<span class="keyword">var</span> item=source_split[i];<span class="keyword">this</span>.scanline(item,regex,block)}}},scanline:<span class="keyword">function</span>(line,regex,block){<span class="keyword">this</span>.lines++;<span class="keyword">var</span> line_split=rsplit(line,regex);<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;line_split.length;i++){<span class="keyword">var</span> token=line_split[i];<span class="keyword">if</span>(token!=<span class="literal">null</span>){<span class="keyword">try</span>{block(token,<span class="keyword">this</span>)}<span class="keyword">catch</span>(e){<span class="keyword">throw</span> {type:<span class="string">"EJS.Scanner"</span>,line:<span class="keyword">this</span>.lines}}}}}};EJS.Buffer=<span class="keyword">function</span>(pre_cmd,post_cmd){<span class="keyword">this</span>.line=<span class="keyword">new</span> Array();<span class="keyword">this</span>.script=<span class="string">""</span>;<span class="keyword">this</span>.pre_cmd=pre_cmd;<span class="keyword">this</span>.post_cmd=post_cmd;<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="keyword">this</span>.pre_cmd.length;i++){<span class="keyword">this</span>.push(pre_cmd[i])}};EJS.Buffer.prototype={push:<span class="keyword">function</span>(cmd){<span class="keyword">this</span>.line.push(cmd)},cr:<span class="keyword">function</span>(){<span class="keyword">this</span>.script=<span class="keyword">this</span>.script+<span class="keyword">this</span>.line.join(<span class="string">"; "</span>);<span class="keyword">this</span>.line=<span class="keyword">new</span> Array();<span class="keyword">this</span>.script=<span class="keyword">this</span>.script+<span class="string">"\n"</span>},close:<span class="keyword">function</span>(){<span class="keyword">if</span>(<span class="keyword">this</span>.line.length&gt;<span class="number">0</span>){<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="keyword">this</span>.post_cmd.length;i++){<span class="keyword">this</span>.push(pre_cmd[i])}<span class="keyword">this</span>.script=<span class="keyword">this</span>.script+<span class="keyword">this</span>.line.join(<span class="string">"; "</span>);line=<span class="literal">null</span>}}};EJS.Compiler=<span class="keyword">function</span>(source,left){<span class="keyword">this</span>.pre_cmd=[<span class="string">"var ___ViewO = [];"</span>];<span class="keyword">this</span>.post_cmd=<span class="keyword">new</span> Array();<span class="keyword">this</span>.source=<span class="string">" "</span>;<span class="keyword">if</span>(source!=<span class="literal">null</span>){<span class="keyword">if</span>(<span class="keyword">typeof</span> source==<span class="string">"string"</span>){source=source.replace(<span class="regexp">/\r\n/g</span>,<span class="string">"\n"</span>);source=source.replace(<span class="regexp">/\r/g</span>,<span class="string">"\n"</span>);<span class="keyword">this</span>.source=source}<span class="keyword">else</span>{<span class="keyword">if</span>(source.innerHTML){<span class="keyword">this</span>.source=source.innerHTML}}<span class="keyword">if</span>(<span class="keyword">typeof</span> <span class="keyword">this</span>.source!=<span class="string">"string"</span>){<span class="keyword">this</span>.source=<span class="string">""</span>}}left=left||<span class="string">"&lt;"</span>;<span class="keyword">var</span> right=<span class="string">"&gt;"</span>;<span class="keyword">switch</span>(left){<span class="keyword">case</span><span class="string">"["</span>:right=<span class="string">"]"</span>;<span class="keyword">break</span>;<span class="keyword">case</span><span class="string">"&lt;"</span>:<span class="keyword">break</span>;<span class="keyword">default</span>:<span class="keyword">throw</span> left+<span class="string">" is not a supported deliminator"</span>;<span class="keyword">break</span>}<span class="keyword">this</span>.scanner=<span class="keyword">new</span> EJS.Scanner(<span class="keyword">this</span>.source,left,right);<span class="keyword">this</span>.out=<span class="string">""</span>};EJS.Compiler.prototype={compile:<span class="keyword">function</span>(options,name){options=options||{};<span class="keyword">this</span>.out=<span class="string">""</span>;<span class="keyword">var</span> put_cmd=<span class="string">"___ViewO.push("</span>;<span class="keyword">var</span> insert_cmd=put_cmd;<span class="keyword">var</span> buff=<span class="keyword">new</span> EJS.Buffer(<span class="keyword">this</span>.pre_cmd,<span class="keyword">this</span>.post_cmd);<span class="keyword">var</span> content=<span class="string">""</span>;<span class="keyword">var</span> clean=<span class="keyword">function</span>(content){content=content.replace(<span class="regexp">/\\/g,"\\\\");content=content.replace(/</span>\n/g,<span class="string">"\\n"</span>);content=content.replace(<span class="regexp">/"/g</span>,<span class="string">'\\"'</span>);<span class="keyword">return</span> content};<span class="keyword">this</span>.scanner.scan(<span class="keyword">function</span>(token,scanner){<span class="keyword">if</span>(scanner.stag==<span class="literal">null</span>){<span class="keyword">switch</span>(token){<span class="keyword">case</span><span class="string">"\n"</span>:content=content+<span class="string">"\n"</span>;buff.push(put_cmd+<span class="string">'"'</span>+clean(content)+<span class="string">'");'</span>);buff.cr();content=<span class="string">""</span>;<span class="keyword">break</span>;<span class="keyword">case</span> scanner.left_delimiter:<span class="keyword">case</span> scanner.left_equal:<span class="keyword">case</span> scanner.left_comment:scanner.stag=token;<span class="keyword">if</span>(content.length&gt;<span class="number">0</span>){buff.push(put_cmd+<span class="string">'"'</span>+clean(content)+<span class="string">'")'</span>)}content=<span class="string">""</span>;<span class="keyword">break</span>;<span class="keyword">case</span> scanner.double_left:content=content+scanner.left_delimiter;<span class="keyword">break</span>;<span class="keyword">default</span>:content=content+token;<span class="keyword">break</span>}}<span class="keyword">else</span>{<span class="keyword">switch</span>(token){<span class="keyword">case</span> scanner.right_delimiter:<span class="keyword">switch</span>(scanner.stag){<span class="keyword">case</span> scanner.left_delimiter:<span class="keyword">if</span>(content[content.length-<span class="number">1</span>]==<span class="string">"\n"</span>){content=chop(content);buff.push(content);buff.cr()}<span class="keyword">else</span>{buff.push(content)}<span class="keyword">break</span>;<span class="keyword">case</span> scanner.left_equal:buff.push(insert_cmd+<span class="string">"(EJS.Scanner.to_text("</span>+content+<span class="string">")))"</span>);<span class="keyword">break</span>}scanner.stag=<span class="literal">null</span>;content=<span class="string">""</span>;<span class="keyword">break</span>;<span class="keyword">case</span> scanner.double_right:content=content+scanner.right_delimiter;<span class="keyword">break</span>;<span class="keyword">default</span>:content=content+token;<span class="keyword">break</span>}}});<span class="keyword">if</span>(content.length&gt;<span class="number">0</span>){buff.push(put_cmd+<span class="string">'"'</span>+clean(content)+<span class="string">'")'</span>)}buff.close();<span class="keyword">this</span>.out=buff.script+<span class="string">";"</span>;<span class="keyword">var</span> to_be_evaled=<span class="string">"/*"</span>+name+<span class="string">"*/this.process = function(_CONTEXT,_VIEW) { try { with(_VIEW) { with (_CONTEXT) {"</span>+<span class="keyword">this</span>.out+<span class="string">" return ___ViewO.join('');}}}catch(e){e.lineNumber=null;throw e;}};"</span>;<span class="keyword">try</span>{eval(to_be_evaled)}<span class="keyword">catch</span>(e){<span class="keyword">if</span>(<span class="keyword">typeof</span> JSLINT!=<span class="string">"undefined"</span>){JSLINT(<span class="keyword">this</span>.out);<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;JSLINT.errors.length;i++){<span class="keyword">var</span> error=JSLINT.errors[i];<span class="keyword">if</span>(error.reason!=<span class="string">"Unnecessary semicolon."</span>){error.line++;<span class="keyword">var</span> e=<span class="keyword">new</span> Error();e.lineNumber=error.line;e.message=error.reason;<span class="keyword">if</span>(options.view){e.fileName=options.view}<span class="keyword">throw</span> e}}}<span class="keyword">else</span>{<span class="keyword">throw</span> e}}}};EJS.config=<span class="keyword">function</span>(options){EJS.cache=options.cache!=<span class="literal">null</span>?options.cache:EJS.cache;EJS.type=options.type!=<span class="literal">null</span>?options.type:EJS.type;EJS.ext=options.ext!=<span class="literal">null</span>?options.ext:EJS.ext;<span class="keyword">var</span> templates_directory=EJS.templates_directory||{};EJS.templates_directory=templates_directory;EJS.get=<span class="keyword">function</span>(path,cache){<span class="keyword">if</span>(cache==<span class="literal">false</span>){<span class="keyword">return</span> <span class="literal">null</span>}<span class="keyword">if</span>(templates_directory[path]){<span class="keyword">return</span> templates_directory[path]}<span class="keyword">return</span> <span class="literal">null</span>};EJS.update=<span class="keyword">function</span>(path,template){<span class="keyword">if</span>(path==<span class="literal">null</span>){<span class="keyword">return</span> }templates_directory[path]=template};EJS.INVALID_PATH=-<span class="number">1</span>};EJS.config({cache:<span class="literal">true</span>,type:<span class="string">"&lt;"</span>,ext:<span class="string">".ejs"</span>});EJS.Helpers=<span class="keyword">function</span>(data,extras){<span class="keyword">this</span>._data=data;<span class="keyword">this</span>._extras=extras;extend(<span class="keyword">this</span>,extras)};EJS.Helpers.prototype={view:<span class="keyword">function</span>(options,data,helpers){<span class="keyword">if</span>(!helpers){helpers=<span class="keyword">this</span>._extras}<span class="keyword">if</span>(!data){data=<span class="keyword">this</span>._data}<span class="keyword">return</span> <span class="keyword">new</span> EJS(options).render(data,helpers)},to_text:<span class="keyword">function</span>(input,null_text){<span class="keyword">if</span>(input==<span class="literal">null</span>||input===<span class="literal">undefined</span>){<span class="keyword">return</span> null_text||<span class="string">""</span>}<span class="keyword">if</span>(input <span class="keyword">instanceof</span> Date){<span class="keyword">return</span> input.toDateString()}<span class="keyword">if</span>(input.toString){<span class="keyword">return</span> input.toString().replace(<span class="regexp">/\n/g</span>,<span class="string">"&lt;br /&gt;"</span>).replace(<span class="regexp">/''/g</span>,<span class="string">"'"</span>)}<span class="keyword">return</span><span class="string">""</span>}};EJS.newRequest=<span class="keyword">function</span>(){<span class="keyword">var</span> factories=[<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">new</span> ActiveXObject(<span class="string">"Msxml2.XMLHTTP"</span>)},<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">new</span> XMLHttpRequest()},<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">new</span> ActiveXObject(<span class="string">"Microsoft.XMLHTTP"</span>)}];<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;factories.length;i++){<span class="keyword">try</span>{<span class="keyword">var</span> request=factories[i]();<span class="keyword">if</span>(request!=<span class="literal">null</span>){<span class="keyword">return</span> request}}<span class="keyword">catch</span>(e){<span class="keyword">continue</span>}}};EJS.request=<span class="keyword">function</span>(path){<span class="keyword">var</span> request=<span class="keyword">new</span> EJS.newRequest();request.open(<span class="string">"GET"</span>,path,<span class="literal">false</span>);<span class="keyword">try</span>{request.send(<span class="literal">null</span>)}<span class="keyword">catch</span>(e){<span class="keyword">return</span> <span class="literal">null</span>}<span class="keyword">if</span>(request.status==<span class="number">404</span>||request.status==<span class="number">2</span>||(request.status==<span class="number">0</span>&amp;&amp;request.responseText==<span class="string">""</span>)){<span class="keyword">return</span> <span class="literal">null</span>}<span class="keyword">return</span> request.responseText};EJS.ajax_request=<span class="keyword">function</span>(params){params.method=(params.method?params.method:<span class="string">"GET"</span>);<span class="keyword">var</span> request=<span class="keyword">new</span> EJS.newRequest();request.onreadystatechange=<span class="keyword">function</span>(){<span class="keyword">if</span>(request.readyState==<span class="number">4</span>){<span class="keyword">if</span>(request.status==<span class="number">200</span>){params.onComplete(request)}<span class="keyword">else</span>{params.onComplete(request)}}};request.open(params.method,params.url);request.send(<span class="literal">null</span>)}})();EJS.Helpers.prototype.date_tag=<span class="keyword">function</span>(C,O,A){<span class="keyword">if</span>(!(O <span class="keyword">instanceof</span> Date)){O=<span class="keyword">new</span> Date()}<span class="keyword">var</span> B=[<span class="string">"January"</span>,<span class="string">"February"</span>,<span class="string">"March"</span>,<span class="string">"April"</span>,<span class="string">"May"</span>,<span class="string">"June"</span>,<span class="string">"July"</span>,<span class="string">"August"</span>,<span class="string">"September"</span>,<span class="string">"October"</span>,<span class="string">"November"</span>,<span class="string">"December"</span>];<span class="keyword">var</span> G=[],D=[],P=[];<span class="keyword">var</span> J=O.getFullYear();<span class="keyword">var</span> H=O.getMonth();<span class="keyword">var</span> N=O.getDate();<span class="keyword">for</span>(<span class="keyword">var</span> M=J-<span class="number">15</span>;M&lt;J+<span class="number">15</span>;M++){G.push({value:M,text:M})}<span class="keyword">for</span>(<span class="keyword">var</span> E=<span class="number">0</span>;E&lt;<span class="number">12</span>;E++){D.push({value:(E),text:B[E]})}<span class="keyword">for</span>(<span class="keyword">var</span> I=<span class="number">0</span>;I&lt;<span class="number">31</span>;I++){P.push({value:(I+<span class="number">1</span>),text:(I+<span class="number">1</span>)})}<span class="keyword">var</span> L=<span class="keyword">this</span>.select_tag(C+<span class="string">"[year]"</span>,J,G,{id:C+<span class="string">"[year]"</span>});<span class="keyword">var</span> F=<span class="keyword">this</span>.select_tag(C+<span class="string">"[month]"</span>,H,D,{id:C+<span class="string">"[month]"</span>});<span class="keyword">var</span> K=<span class="keyword">this</span>.select_tag(C+<span class="string">"[day]"</span>,N,P,{id:C+<span class="string">"[day]"</span>});<span class="keyword">return</span> L+F+K};EJS.Helpers.prototype.form_tag=<span class="keyword">function</span>(B,A){A=A||{};A.action=B;<span class="keyword">if</span>(A.multipart==<span class="literal">true</span>){A.method=<span class="string">"post"</span>;A.enctype=<span class="string">"multipart/form-data"</span>}<span class="keyword">return</span> <span class="keyword">this</span>.start_tag_for(<span class="string">"form"</span>,A)};EJS.Helpers.prototype.form_tag_end=<span class="keyword">function</span>(){<span class="keyword">return</span> <span class="keyword">this</span>.tag_end(<span class="string">"form"</span>)};EJS.Helpers.prototype.hidden_field_tag=<span class="keyword">function</span>(A,C,B){<span class="keyword">return</span> <span class="keyword">this</span>.input_field_tag(A,C,<span class="string">"hidden"</span>,B)};EJS.Helpers.prototype.input_field_tag=<span class="keyword">function</span>(A,D,C,B){B=B||{};B.id=B.id||A;B.value=D||<span class="string">""</span>;B.type=C||<span class="string">"text"</span>;B.name=A;<span class="keyword">return</span> <span class="keyword">this</span>.single_tag_for(<span class="string">"input"</span>,B)};EJS.Helpers.prototype.is_current_page=<span class="keyword">function</span>(A){<span class="keyword">return</span>(window.location.href==A||window.location.pathname==A?<span class="literal">true</span>:<span class="literal">false</span>)};EJS.Helpers.prototype.link_to=<span class="keyword">function</span>(B,A,C){<span class="keyword">if</span>(!B){<span class="keyword">var</span> B=<span class="string">"null"</span>}<span class="keyword">if</span>(!C){<span class="keyword">var</span> C={}}<span class="keyword">if</span>(C.confirm){C.onclick=<span class="string">' var ret_confirm = confirm("'</span>+C.confirm+<span class="string">'"); if(!ret_confirm){ return false;} '</span>;C.confirm=<span class="literal">null</span>}C.href=A;<span class="keyword">return</span> <span class="keyword">this</span>.start_tag_for(<span class="string">"a"</span>,C)+B+<span class="keyword">this</span>.tag_end(<span class="string">"a"</span>)};EJS.Helpers.prototype.submit_link_to=<span class="keyword">function</span>(B,A,C){<span class="keyword">if</span>(!B){<span class="keyword">var</span> B=<span class="string">"null"</span>}<span class="keyword">if</span>(!C){<span class="keyword">var</span> C={}}C.onclick=C.onclick||<span class="string">""</span>;<span class="keyword">if</span>(C.confirm){C.onclick=<span class="string">' var ret_confirm = confirm("'</span>+C.confirm+<span class="string">'"); if(!ret_confirm){ return false;} '</span>;C.confirm=<span class="literal">null</span>}C.value=B;C.type=<span class="string">"submit"</span>;C.onclick=C.onclick+(A?<span class="keyword">this</span>.url_for(A):<span class="string">""</span>)+<span class="string">"return false;"</span>;<span class="keyword">return</span> <span class="keyword">this</span>.start_tag_for(<span class="string">"input"</span>,C)};EJS.Helpers.prototype.link_to_if=<span class="keyword">function</span>(F,B,A,D,C,E){<span class="keyword">return</span> <span class="keyword">this</span>.link_to_unless((F==<span class="literal">false</span>),B,A,D,C,E)};EJS.Helpers.prototype.link_to_unless=<span class="keyword">function</span>(E,B,A,C,D){C=C||{};<span class="keyword">if</span>(E){<span class="keyword">if</span>(D&amp;&amp;<span class="keyword">typeof</span> D==<span class="string">"function"</span>){<span class="keyword">return</span> D(B,A,C,D)}<span class="keyword">else</span>{<span class="keyword">return</span> B}}<span class="keyword">else</span>{<span class="keyword">return</span> <span class="keyword">this</span>.link_to(B,A,C)}};EJS.Helpers.prototype.link_to_unless_current=<span class="keyword">function</span>(B,A,C,D){C=C||{};<span class="keyword">return</span> <span class="keyword">this</span>.link_to_unless(<span class="keyword">this</span>.is_current_page(A),B,A,C,D)};EJS.Helpers.prototype.password_field_tag=<span class="keyword">function</span>(A,C,B){<span class="keyword">return</span> <span class="keyword">this</span>.input_field_tag(A,C,<span class="string">"password"</span>,B)};EJS.Helpers.prototype.select_tag=<span class="keyword">function</span>(D,G,H,F){F=F||{};F.id=F.id||D;F.value=G;F.name=D;<span class="keyword">var</span> B=<span class="string">""</span>;B+=<span class="keyword">this</span>.start_tag_for(<span class="string">"select"</span>,F);<span class="keyword">for</span>(<span class="keyword">var</span> E=<span class="number">0</span>;E&lt;H.length;E++){<span class="keyword">var</span> C=H[E];<span class="keyword">var</span> A={value:C.value};<span class="keyword">if</span>(C.value==G){A.selected=<span class="string">"selected"</span>}B+=<span class="keyword">this</span>.start_tag_for(<span class="string">"option"</span>,A)+C.text+<span class="keyword">this</span>.tag_end(<span class="string">"option"</span>)}B+=<span class="keyword">this</span>.tag_end(<span class="string">"select"</span>);<span class="keyword">return</span> B};EJS.Helpers.prototype.single_tag_for=<span class="keyword">function</span>(A,B){<span class="keyword">return</span> <span class="keyword">this</span>.tag(A,B,<span class="string">"/&gt;"</span>)};EJS.Helpers.prototype.start_tag_for=<span class="keyword">function</span>(A,B){<span class="keyword">return</span> <span class="keyword">this</span>.tag(A,B)};EJS.Helpers.prototype.submit_tag=<span class="keyword">function</span>(A,B){B=B||{};B.type=B.type||<span class="string">"submit"</span>;B.value=A||<span class="string">"Submit"</span>;<span class="keyword">return</span> <span class="keyword">this</span>.single_tag_for(<span class="string">"input"</span>,B)};EJS.Helpers.prototype.tag=<span class="keyword">function</span>(C,E,D){<span class="keyword">if</span>(!D){<span class="keyword">var</span> D=<span class="string">"&gt;"</span>}<span class="keyword">var</span> B=<span class="string">" "</span>;<span class="keyword">for</span>(<span class="keyword">var</span> A <span class="keyword">in</span> E){<span class="keyword">if</span>(E[A]!=<span class="literal">null</span>){<span class="keyword">var</span> F=E[A].toString()}<span class="keyword">else</span>{<span class="keyword">var</span> F=<span class="string">""</span>}<span class="keyword">if</span>(A==<span class="string">"Class"</span>){A=<span class="string">"class"</span>}<span class="keyword">if</span>(F.indexOf(<span class="string">"'"</span>)!=-<span class="number">1</span>){B+=A+<span class="string">'="'</span>+F+<span class="string">'" '</span>}<span class="keyword">else</span>{B+=A+<span class="string">"='"</span>+F+<span class="string">"' "</span>}}<span class="keyword">return</span><span class="string">"&lt;"</span>+C+B+D};EJS.Helpers.prototype.tag_end=<span class="keyword">function</span>(A){<span class="keyword">return</span><span class="string">"&lt;/"</span>+A+<span class="string">"&gt;"</span>};EJS.Helpers.prototype.text_area_tag=<span class="keyword">function</span>(A,C,B){B=B||{};B.id=B.id||A;B.name=B.name||A;C=C||<span class="string">""</span>;<span class="keyword">if</span>(B.size){B.cols=B.size.split(<span class="string">"x"</span>)[<span class="number">0</span>];B.rows=B.size.split(<span class="string">"x"</span>)[<span class="number">1</span>];<span class="keyword">delete</span> B.size}B.cols=B.cols||<span class="number">50</span>;B.rows=B.rows||<span class="number">4</span>;<span class="keyword">return</span> <span class="keyword">this</span>.start_tag_for(<span class="string">"textarea"</span>,B)+C+<span class="keyword">this</span>.tag_end(<span class="string">"textarea"</span>)};EJS.Helpers.prototype.text_tag=EJS.Helpers.prototype.text_area_tag;EJS.Helpers.prototype.text_field_tag=<span class="keyword">function</span>(A,C,B){<span class="keyword">return</span> <span class="keyword">this</span>.input_field_tag(A,C,<span class="string">"text"</span>,B)};EJS.Helpers.prototype.url_for=<span class="keyword">function</span>(A){<span class="keyword">return</span><span class="string">'window.location="'</span>+A+<span class="string">'";'</span>};EJS.Helpers.prototype.img_tag=<span class="keyword">function</span>(B,C,A){A=A||{};A.src=B;A.alt=C;<span class="keyword">return</span> <span class="keyword">this</span>.single_tag_for(<span class="string">"img"</span>,A)}</pre></div>
        
      
      <div class="fleur">h</div>
    </div>
  </div>
</body>
</html>
