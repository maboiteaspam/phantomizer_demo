<!DOCTYPE html>

<html>
<head>
  <title>view.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="public/stylesheets/normalize.css" />
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div class="container">
    <div class="page">

      <div class="header">
        
          <h1>view.js</h1>
        

        
          <div class="toc">
            <h3>Table of Contents</h3>
            <ol>
              
                
                <li>
                  <a class="source" href="ejs.html">
                    ejs.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="ejs_production.html">
                    ejs_production.js
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="view.html">
                    view.js
                  </a>
                </li>
              
            </ol>
          </div>
        
      </div>

      
        
        
        
          <div class='highlight'><pre>EJS.Helpers.prototype.date_tag = <span class="keyword">function</span>(name, value , html_options) {
    <span class="keyword">if</span>(! (value <span class="keyword">instanceof</span> Date))
		value = <span class="keyword">new</span> Date()
	
	<span class="keyword">var</span> month_names = [<span class="string">"January"</span>, <span class="string">"February"</span>, <span class="string">"March"</span>, <span class="string">"April"</span>, <span class="string">"May"</span>, <span class="string">"June"</span>, <span class="string">"July"</span>, <span class="string">"August"</span>, <span class="string">"September"</span>, <span class="string">"October"</span>, <span class="string">"November"</span>, <span class="string">"December"</span>];
	<span class="keyword">var</span> years = [], months = [], days =[];
	<span class="keyword">var</span> year = value.getFullYear();
	<span class="keyword">var</span> month = value.getMonth();
	<span class="keyword">var</span> day = value.getDate();
	<span class="keyword">for</span>(<span class="keyword">var</span> y = year - <span class="number">15</span>; y &lt; year+<span class="number">15</span> ; y++)
	{
		years.push({value: y, text: y})
	}
	<span class="keyword">for</span>(<span class="keyword">var</span> m = <span class="number">0</span>; m &lt; <span class="number">12</span>; m++)
	{
		months.push({value: (m), text: month_names[m]})
	}
	<span class="keyword">for</span>(<span class="keyword">var</span> d = <span class="number">0</span>; d &lt; <span class="number">31</span>; d++)
	{
		days.push({value: (d+<span class="number">1</span>), text: (d+<span class="number">1</span>)})
	}
	<span class="keyword">var</span> year_select = <span class="keyword">this</span>.select_tag(name+<span class="string">'[year]'</span>, year, years, {id: name+<span class="string">'[year]'</span>} )
	<span class="keyword">var</span> month_select = <span class="keyword">this</span>.select_tag(name+<span class="string">'[month]'</span>, month, months, {id: name+<span class="string">'[month]'</span>})
	<span class="keyword">var</span> day_select = <span class="keyword">this</span>.select_tag(name+<span class="string">'[day]'</span>, day, days, {id: name+<span class="string">'[day]'</span>})
	
    <span class="keyword">return</span> year_select+month_select+day_select;
}

EJS.Helpers.prototype.form_tag = <span class="keyword">function</span>(action, html_options) {
                 
    
    html_options     = html_options                     || {};
	html_options.action = action
    <span class="keyword">if</span>(html_options.multipart == <span class="literal">true</span>) {
        html_options.method = <span class="string">'post'</span>;
        html_options.enctype = <span class="string">'multipart/form-data'</span>;
    }
    
    <span class="keyword">return</span> <span class="keyword">this</span>.start_tag_for(<span class="string">'form'</span>, html_options)
}

EJS.Helpers.prototype.form_tag_end = <span class="keyword">function</span>() { <span class="keyword">return</span> <span class="keyword">this</span>.tag_end(<span class="string">'form'</span>); }

EJS.Helpers.prototype.hidden_field_tag   = <span class="keyword">function</span>(name, value, html_options) { 
    <span class="keyword">return</span> <span class="keyword">this</span>.input_field_tag(name, value, <span class="string">'hidden'</span>, html_options); 
}

EJS.Helpers.prototype.input_field_tag = <span class="keyword">function</span>(name, value , inputType, html_options) {
    
    html_options = html_options || {};
    html_options.id  = html_options.id  || name;
    html_options.value = value || <span class="string">''</span>;
    html_options.type = inputType || <span class="string">'text'</span>;
    html_options.name = name;
    
    <span class="keyword">return</span> <span class="keyword">this</span>.single_tag_for(<span class="string">'input'</span>, html_options)
}

EJS.Helpers.prototype.is_current_page = <span class="keyword">function</span>(url) {
	<span class="keyword">return</span> (window.location.href == url || window.location.pathname == url ? <span class="literal">true</span> : <span class="literal">false</span>);
}

EJS.Helpers.prototype.link_to = <span class="keyword">function</span>(name, url, html_options) {
    <span class="keyword">if</span>(!name) <span class="keyword">var</span> name = <span class="string">'null'</span>;
    <span class="keyword">if</span>(!html_options) <span class="keyword">var</span> html_options = {}
	
	<span class="keyword">if</span>(html_options.confirm){
		html_options.onclick = 
		<span class="string">" var ret_confirm = confirm(\""</span>+html_options.confirm+<span class="string">"\"); if(!ret_confirm){ return false;} "</span>
		html_options.confirm = <span class="literal">null</span>;
	}
    html_options.href=url
    <span class="keyword">return</span> <span class="keyword">this</span>.start_tag_for(<span class="string">'a'</span>, html_options)+name+ <span class="keyword">this</span>.tag_end(<span class="string">'a'</span>);
}

EJS.Helpers.prototype.submit_link_to = <span class="keyword">function</span>(name, url, html_options){
	<span class="keyword">if</span>(!name) <span class="keyword">var</span> name = <span class="string">'null'</span>;
    <span class="keyword">if</span>(!html_options) <span class="keyword">var</span> html_options = {}
    html_options.onclick = html_options.onclick  || <span class="string">''</span> ;
	
	<span class="keyword">if</span>(html_options.confirm){
		html_options.onclick = 
		<span class="string">" var ret_confirm = confirm(\""</span>+html_options.confirm+<span class="string">"\"); if(!ret_confirm){ return false;} "</span>
		html_options.confirm = <span class="literal">null</span>;
	}
	
    html_options.value = name;
	html_options.type = <span class="string">'submit'</span>
    html_options.onclick=html_options.onclick+
		(url ? <span class="keyword">this</span>.url_for(url) : <span class="string">''</span>)+<span class="string">'return false;'</span>;</pre></div>
        
      
        
        <p>html_options.href=‘#’+(options ? Routes.url_for(options) : ‘’)</p>

        
          <div class='highlight'><pre>	<span class="keyword">return</span> <span class="keyword">this</span>.start_tag_for(<span class="string">'input'</span>, html_options)
}

EJS.Helpers.prototype.link_to_if = <span class="keyword">function</span>(condition, name, url, html_options, post, block) {
	<span class="keyword">return</span> <span class="keyword">this</span>.link_to_unless((condition == <span class="literal">false</span>), name, url, html_options, post, block);
}

EJS.Helpers.prototype.link_to_unless = <span class="keyword">function</span>(condition, name, url, html_options, block) {
	html_options = html_options || {};
	<span class="keyword">if</span>(condition) {
		<span class="keyword">if</span>(block &amp;&amp; <span class="keyword">typeof</span> block == <span class="string">'function'</span>) {
			<span class="keyword">return</span> block(name, url, html_options, block);
		} <span class="keyword">else</span> {
			<span class="keyword">return</span> name;
		}
	} <span class="keyword">else</span>
		<span class="keyword">return</span> <span class="keyword">this</span>.link_to(name, url, html_options);
}

EJS.Helpers.prototype.link_to_unless_current = <span class="keyword">function</span>(name, url, html_options, block) {
	html_options = html_options || {};
	<span class="keyword">return</span> <span class="keyword">this</span>.link_to_unless(<span class="keyword">this</span>.is_current_page(url), name, url, html_options, block)
}


EJS.Helpers.prototype.password_field_tag = <span class="keyword">function</span>(name, value, html_options) { <span class="keyword">return</span> <span class="keyword">this</span>.input_field_tag(name, value, <span class="string">'password'</span>, html_options); }

EJS.Helpers.prototype.select_tag = <span class="keyword">function</span>(name, value, choices, html_options) {     
    html_options = html_options || {};
    html_options.id  = html_options.id  || name;
    html_options.value = value;
	html_options.name = name;
    
    <span class="keyword">var</span> txt = <span class="string">''</span>
    txt += <span class="keyword">this</span>.start_tag_for(<span class="string">'select'</span>, html_options)
    
    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; choices.length; i++)
    {
        <span class="keyword">var</span> choice = choices[i];
        <span class="keyword">var</span> optionOptions = {value: choice.value}
        <span class="keyword">if</span>(choice.value == value)
            optionOptions.selected =<span class="string">'selected'</span>
        txt += <span class="keyword">this</span>.start_tag_for(<span class="string">'option'</span>, optionOptions )+choice.text+<span class="keyword">this</span>.tag_end(<span class="string">'option'</span>)
    }
    txt += <span class="keyword">this</span>.tag_end(<span class="string">'select'</span>);
    <span class="keyword">return</span> txt;
}

EJS.Helpers.prototype.single_tag_for = <span class="keyword">function</span>(tag, html_options) { <span class="keyword">return</span> <span class="keyword">this</span>.tag(tag, html_options, <span class="string">'/&gt;'</span>);}

EJS.Helpers.prototype.start_tag_for = <span class="keyword">function</span>(tag, html_options)  { <span class="keyword">return</span> <span class="keyword">this</span>.tag(tag, html_options); }

EJS.Helpers.prototype.submit_tag = <span class="keyword">function</span>(name, html_options) {  
    html_options = html_options || {};</pre></div>
        
      
        
        <p>html_options.name  = html_options.id  || ‘commit’;</p>

        
          <div class='highlight'><pre>    html_options.type = html_options.type  || <span class="string">'submit'</span>;
    html_options.value = name || <span class="string">'Submit'</span>;
    <span class="keyword">return</span> <span class="keyword">this</span>.single_tag_for(<span class="string">'input'</span>, html_options);
}

EJS.Helpers.prototype.tag = <span class="keyword">function</span>(tag, html_options, end) {
    <span class="keyword">if</span>(!end) <span class="keyword">var</span> end = <span class="string">'&gt;'</span>
    <span class="keyword">var</span> txt = <span class="string">' '</span>
    <span class="keyword">for</span>(<span class="keyword">var</span> attr <span class="keyword">in</span> html_options) { 
	   <span class="keyword">if</span>(html_options[attr] != <span class="literal">null</span>)
        <span class="keyword">var</span> value = html_options[attr].toString();
       <span class="keyword">else</span>
        <span class="keyword">var</span> value=<span class="string">''</span>
       <span class="keyword">if</span>(attr == <span class="string">"Class"</span>) <span class="comment">// special case because "class" is a reserved word in IE</span>
        attr = <span class="string">"class"</span>;
       <span class="keyword">if</span>( value.indexOf(<span class="string">"'"</span>) != -<span class="number">1</span> )
            txt += attr+<span class="string">'=\"'</span>+value+<span class="string">'\" '</span> 
       <span class="keyword">else</span>
            txt += attr+<span class="string">"='"</span>+value+<span class="string">"' "</span> 
    }
    <span class="keyword">return</span> <span class="string">'&lt;'</span>+tag+txt+end;
}

EJS.Helpers.prototype.tag_end = <span class="keyword">function</span>(tag)             { <span class="keyword">return</span> <span class="string">'&lt;/'</span>+tag+<span class="string">'&gt;'</span>; }

EJS.Helpers.prototype.text_area_tag = <span class="keyword">function</span>(name, value, html_options) { 
    html_options = html_options || {};
    html_options.id  = html_options.id  || name;
    html_options.name  = html_options.name  || name;
	value = value || <span class="string">''</span>
    <span class="keyword">if</span>(html_options.size) {
        html_options.cols = html_options.size.split(<span class="string">'x'</span>)[<span class="number">0</span>]
        html_options.rows = html_options.size.split(<span class="string">'x'</span>)[<span class="number">1</span>];
        <span class="keyword">delete</span> html_options.size
    }
    
    html_options.cols = html_options.cols  || <span class="number">50</span>;
    html_options.rows = html_options.rows  || <span class="number">4</span>;
    
    <span class="keyword">return</span>  <span class="keyword">this</span>.start_tag_for(<span class="string">'textarea'</span>, html_options)+value+<span class="keyword">this</span>.tag_end(<span class="string">'textarea'</span>)
}
EJS.Helpers.prototype.text_tag = EJS.Helpers.prototype.text_area_tag

EJS.Helpers.prototype.text_field_tag     = <span class="keyword">function</span>(name, value, html_options) { <span class="keyword">return</span> <span class="keyword">this</span>.input_field_tag(name, value, <span class="string">'text'</span>, html_options); }

EJS.Helpers.prototype.url_for = <span class="keyword">function</span>(url) {
        <span class="keyword">return</span> <span class="string">'window.location="'</span>+url+<span class="string">'";'</span>
}
EJS.Helpers.prototype.img_tag = <span class="keyword">function</span>(image_location, alt, options){
	options = options || {};
	options.src = image_location
	options.alt = alt
	<span class="keyword">return</span> <span class="keyword">this</span>.single_tag_for(<span class="string">'img'</span>, options)
}</pre></div>
        
      
      <div class="fleur">h</div>
    </div>
  </div>
</body>
</html>
